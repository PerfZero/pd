# App
NODE_ENV=development
PORT=5000
API_VERSION=v1
CLIENT_URL=http://localhost:5173
SERVER_URL=http://localhost:5000
TRUST_PROXY=false

# Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=passdesk
DB_USER=admin
DB_PASSWORD=admin_password
DB_SSL=false

# Auth (min 32 chars each)
JWT_SECRET=replace_with_strong_secret_min_32_chars
JWT_EXPIRE=2h
JWT_REFRESH_SECRET=replace_with_other_strong_secret_min_32_chars
JWT_REFRESH_EXPIRE=7d
BCRYPT_ROUNDS=10

# Storage provider: cloudru | yandexs3 | yandexdisk
STORAGE_PROVIDER=cloudru

# Cloud.ru S3
CLOUDRU_S3_ENDPOINT=https://s3.ru1.storage.beget.cloud
CLOUDRU_S3_REGION=ru1
CLOUDRU_S3_BUCKET_NAME=replace_bucket_name
CLOUDRU_S3_ACCESS_KEY_ID=replace_access_key_id
CLOUDRU_S3_SECRET_ACCESS_KEY=replace_secret_access_key
CLOUDRU_S3_BASE_PATH=
CLOUDRU_S3_KMS_KEY_ID=

# Generic S3 fallback (optional)
S3_ENDPOINT=
S3_REGION=
S3_BUCKET_NAME=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_BASE_PATH=
S3_KMS_KEY_ID=

# Yandex S3 (optional)
YANDEX_S3_ENDPOINT=https://storage.yandexcloud.net
YANDEX_S3_REGION=ru-central1
YANDEX_S3_BUCKET_NAME=
YANDEX_S3_ACCESS_KEY_ID=
YANDEX_S3_SECRET_ACCESS_KEY=
YANDEX_S3_BASE_PATH=
YANDEX_S3_KMS_KEY_ID=

# Yandex Disk (optional)
YANDEX_DISK_TOKEN=
YANDEX_DISK_BASE_PATH=/PassDesk

# Uploads / notifications
MAX_FILE_SIZE=20971520
MAX_FILES_PER_REQUEST=10
EMAIL_WEBHOOK_URL=
OT_EMAIL_WEBHOOK_URL=

# Field-level encryption (employees)
FIELD_ENCRYPTION_ENABLED=true
APP_FIELD_ENCRYPTION_ACTIVE_KEY_VERSION=v1
APP_FIELD_ENCRYPTION_KEYS={"v1":"replace_with_base64_32_byte_key"}
APP_FIELD_HASH_PEPPER=replace_with_very_long_random_secret
# Keep legacy plaintext for doc fields (passport/kig/patent) while R3 migration is in progress.
# Set to false only after backfill verification and compatibility checks.
FIELD_ENCRYPTION_KEEP_LEGACY_DOC_PLAINTEXT=true

# File encryption for sensitive document scans
FILE_ENCRYPTION_ENABLED=true
# By default file encryption reuses APP_FIELD_ENCRYPTION_* keys.
# Optionally set dedicated keys:
# APP_FILE_ENCRYPTION_ACTIVE_KEY_VERSION=v1
# APP_FILE_ENCRYPTION_KEYS={"v1":"replace_with_base64_32_byte_key"}
# CSV list of document types that should be encrypted before S3 upload
FILE_ENCRYPTION_SENSITIVE_DOC_TYPES=passport,kig,patent_front,patent_back,application_scan
# Short-lived token TTL for proxy download links (seconds)
FILE_PROXY_TOKEN_TTL_SECONDS=300

# OCR (production)
OCR_ENABLED=false
OCR_PROVIDER=openrouter
OCR_API_KEY=
OCR_OPENROUTER_ENDPOINT=https://openrouter.ai/api/v1/chat/completions
OCR_OPENROUTER_MODEL=qwen/qwen3-vl-30b-a3b-instruct
OCR_OPENROUTER_HTTP_REFERER=
OCR_OPENROUTER_APP_TITLE=PassDesk OCR
OCR_REQUEST_TIMEOUT_MS=60000
OCR_MAX_FILE_SIZE=10485760
OCR_PASSPORT_RF_PROMPT=

# Telegram bot
TELEGRAM_BOT_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_LINK_CODE_TTL_MINUTES=10
TELEGRAM_EXPIRY_CHECK_INTERVAL_MS=3600000
